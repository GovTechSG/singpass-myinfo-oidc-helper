{"version":3,"sources":["../webpack/bootstrap","../external \"lodash\"","../external \"moment\"","../external \"node-jose\"","../external \"querystring\"","../external \"is-base64\"","../external \"node-apex-api-security\"","../external \"axios-https-proxy-fix\"","../external \"url\"",".././src/util/ConfigUtils.ts",".././src/util/StringUtil.ts",".././src/util/JestUtil.ts",".././src/util/SigningUtil.ts",".././src/util/JweUtil.ts",".././src/util/index.ts",".././src/util/RedactorUtil.ts",".././src/client/index.ts",".././src/myinfo/helper/myinfo-request.ts",".././src/myinfo/helper/myinfo-helper.ts",".././src/myinfo/helper/index.ts",".././src/myinfo/fake/profiles/fake-profile.ts",".././src/myinfo/fake/profiles/mrSGDaddyPerfect.ts",".././src/myinfo/fake/profiles/mrPRDaddyPerfect.ts",".././src/myinfo/fake/profiles/childbirthRecords.ts",".././src/myinfo/fake/profiles/mrSGDaddyChildIsOld.ts",".././src/myinfo/fake/profiles/mrSGDaddyChildNone.ts",".././src/myinfo/fake/profiles/mrSGDaddyLongNames.ts",".././src/myinfo/fake/profiles/mrSGDaddyManyChildren.ts",".././src/myinfo/fake/profiles/mrSGPreschoolRegister.ts",".././src/myinfo/fake/profiles/mrSGDaddyMissingFields.ts",".././src/myinfo/fake/profiles/mrSGDaddyMissingUneditableFields.ts",".././src/myinfo/fake/profiles/mrPRDaddyOneChild.ts",".././src/myinfo/fake/profiles/mrsMYMommyPerfect.ts",".././src/myinfo/fake/profiles/mrsSGMommyPerfect.ts",".././src/myinfo/fake/profiles/mrMYDaddyPerfect.ts",".././src/myinfo/fake/profiles/fake-profiles.ts",".././src/myinfo/fake/fake-helper.ts",".././src/myinfo/fake/fake-request.ts",".././src/myinfo/fake/index.ts",".././src/myinfo/index.ts",".././src/singpass/singpass-helper.ts",".././src/singpass/index.ts",".././src/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","module.exports = require(\"lodash\");","module.exports = require(\"moment\");","module.exports = require(\"node-jose\");","module.exports = require(\"querystring\");","module.exports = require(\"is-base64\");","module.exports = require(\"node-apex-api-security\");","module.exports = require(\"axios-https-proxy-fix\");","module.exports = require(\"url\");","let displayWarnings = true;\n\nexport function disableMissingEnvWarnings() {\n\tdisplayWarnings = false;\n}\n\nexport function getValueFromEnv(key: string, defaultValue?: string): string {\n\tconst value = !!process.env[key] ? process.env[key].trim() : defaultValue;\n\tif (!value && displayWarnings) {\n\t\tconsole.warn(`Configuration key not found or empty: ${key}`);\n\t}\n\treturn value;\n}\n\nexport function getValueFromEnvWithoutWarn(key: string, defaultValue?: string): string {\n\tconst value = !!process.env[key] ? process.env[key].trim() : defaultValue;\n\treturn value;\n}\n\nexport function getIntValueFromEnv(key: string, defaultValue: number): number {\n\tconst stringValue = getValueFromEnv(key, null);\n\tif (!stringValue) {\n\t\treturn defaultValue;\n\t}\n\n\tconst intValue = parseInt(stringValue, 10);\n\tif (isNaN(intValue)) {\n\t\tif (displayWarnings) {\n\t\t\tconsole.warn(`Configuration ${key} is not a valid integer: ${stringValue}`);\n\t\t}\n\t\treturn defaultValue;\n\t}\n\n\treturn intValue;\n}\n\n\nexport function getBooleanValueFromEnv(key: string, defaultValue: boolean = false): boolean {\n\tconst stringValue = getValueFromEnv(key, null);\n\tif (!stringValue) {\n\t\treturn defaultValue;\n\t}\n\n\tif (stringValue !== \"true\" && stringValue !== \"false\") {\n\t\tconsole.warn(`Configuration ${key} is not a valid boolean: ${stringValue}`);\n\t}\n\n\treturn stringValue === \"true\";\n}\n","import * as isBase64 from \"is-base64\";\n\n\nexport function replaceLineBreaks(input: string): string {\n\tif (!input) {\n\t\treturn input;\n\t}\n\n\treturn input.replace(/\\\\n/g, \"\\n\");\n}\n\nexport function isBase64Valid(test: string): boolean {\n\treturn isBase64(test, { paddingRequired: false });\n}\n","declare var global: any;\n\n/**\n * @returns Whether the code is currently running in Jest or not\n */\nexport function isTest(): boolean {\n\treturn global.describe && global.it;\n}\n","import * as _ from \"lodash\";\nimport { ApiSigningUtil } from \"node-apex-api-security\";\n\nexport enum HttpMethod {\n\tGET = \"GET\",\n\tPOST = \"POST\",\n}\n\nexport function generateAuthorizationHeader(\n\trealm: string,\n\tauthPrefix: string,\n\thttpMethod: HttpMethod,\n\turl: string,\n\tappId: string,\n\tformJson: any,\n\tprivateKeyContent: string,\n\tprivateKeyPassword: string,\n\tbearer?: string,\n\tnonce?: string,\n\ttimestamp?: number): string {\n\t// const eRealm = _.replace(realm, \".api.gov.sg\", \".e.api.gov.sg\");\n\tconst eURL = _.replace(url, \".api.gov.sg\", \".e.api.gov.sg\");\n\n\tconst rsaHeader = ApiSigningUtil.getSignatureToken({\n\t\tauthPrefix,\n\t\tappId,\n\t\turlPath: eURL,\n\t\thttpMethod,\n\t\trealm,\n\t\tkeyString: privateKeyContent,\n\t\tpassphrase: privateKeyPassword,\n\t\tqueryString: formJson,\n\t\tnonce,\n\t\ttimestamp,\n\t});\n\n\tif (bearer && bearer.length > 0) {\n\t\treturn `${rsaHeader}, Bearer ${bearer}`;\n\t} else {\n\t\treturn rsaHeader;\n\t}\n}\n","import * as jose from \"node-jose\";\n\ninterface JWT {\n\theader:\n\t{\n\t\talg: string;\n\t\tenc: string;\n\t\tkid: string;\n\t\tcty: string;\n\t};\n\tprotected: string[];\n\tpayload: Buffer;\n}\n\nexport interface JWE extends JWT {\n\tplaintext: Buffer;\n}\n\nexport interface JWS extends JWT {\n\tsignature: Buffer;\n}\n\nexport async function decryptJWE(jwe: string, decryptKey: string): Promise<JWE> {\n\tif (!jwe) throw new Error(\"Missing JWE data.\");\n\tif (!decryptKey) throw new Error(\"Missing key to decrypt JWE payload.\");\n\t// TODO: can be further optimized by caching key in memory instead of regenerating each time\n\tconst key = await jose.JWK.asKey(decryptKey, \"pem\");\n\n\t// allow all supported algorithms\n\treturn jose.JWE.createDecrypt(key, { algorithms: [\"*\"] }).decrypt(jwe);\n}\n\nexport async function verifyJWS(jws: string, verifyCert: string): Promise<JWS> {\n\tif (!jws) throw new Error(\"Missing JWS data.\");\n\tif (!verifyCert) throw new Error(\"Missing cert to verify JWS payload.\");\n\n\t// TODO: can be further optimized by caching key in memory instead of regenerating each time\n\tconst jwsKey = await jose.JWK.asKey(verifyCert, \"pem\");\n\n\treturn jose.JWS.createVerify(jwsKey).verify(jws);\n}\n","import * as ConfigUtils from \"./ConfigUtils\";\nimport * as StringUtil from \"./StringUtil\";\nimport * as JestUtil from \"./JestUtil\";\nimport * as SigningUtil from \"./SigningUtil\";\nimport * as JweUtil from \"./JweUtil\";\n\nexport { ConfigUtils, StringUtil, JestUtil, SigningUtil, JweUtil };\n","export const redactNricfinInString = (input: string): string => {\n\tconst indexOfNric = getIndexOfNricInString(input);\n\tif (indexOfNric !== -1) {\n\t\tconst nric = input.substr(indexOfNric, 9);\n\t\tconst redactedNric = redactNricfin(nric);\n\n\t\treturn input.replace(nric, redactedNric);\n\t}\n\n\treturn input;\n};\n\nexport const redactNricfin = (nricfin: string): string => {\n\tif (nricfin && isValidNricfin(nricfin)) {\n\t\tconst firstThreeDigits = nricfin.substring(1, 4);\n\t\treturn nricfin.replace(firstThreeDigits, \"***\");\n\t}\n\n\treturn nricfin;\n};\n\nconst isValidNricfin = (value) => {\n\tconst result = /[STFG]\\d{7}[A-Z]/i.exec(value);\n\treturn result;\n};\n\nconst getIndexOfNricInString = (value): number => {\n\tconst result = /[STFG]\\d{7}[A-Z]/i.exec(value);\n\tif (!!result) {\n\t\treturn result.index;\n\t}\n\treturn -1;\n};\n\n","import axios, { AxiosInstance, AxiosProxyConfig, AxiosRequestConfig } from \"axios-https-proxy-fix\";\nimport * as url from \"url\";\nimport { redactNricfinInString } from \"../util/RedactorUtil\";\nimport { set } from \"lodash\";\n\nexport const createClient = (requestConfig: AxiosRequestConfig = {}): AxiosInstance => {\n\t// Note: Due to axios not being able to automatically pick up proxy env vars\n\t// correctly, we have manually set the proxy config here.\n\t// That alone is not enough to resolve the issue as there is a bug with axios\n\t// where requesting a https endpoint through Nectar's http proxy does not work\n\t// Hence, we have to use a forked library called axios-https-proxy-fix\n\t// Hopefully the next stable release of axios (post 0.18.0) will fix this\n\t// Also to note: tested 0.19.0-beta.1 version of axios and still encountering proxy errors\n\tconst proxyConfig = getProxyConfig();\n\trequestConfig = proxyConfig ?\n\t\t{ proxy: proxyConfig, ...requestConfig }\n\t\t: requestConfig;\n\n\tconst instance = axios.create({\n\t\t...requestConfig,\n\t});\n\n\taddRequestLogs(instance);\n\taddResponseLogs(instance);\n\treturn instance;\n};\n\nconst getProxyConfig = (): AxiosProxyConfig => {\n\tconst proxyUrl = process.env.HTTPS_PROXY || process.env.https_proxy || process.env.HTTP_PROXY || process.env.http_proxy;\n\n\tif (proxyUrl) {\n\t\tconst parsed = url.parse(proxyUrl);\n\t\tconst proxyConfig = {\n\t\t\thost: parsed.hostname,\n\t\t\tport: parseInt(parsed.port, 10),\n\t\t};\n\n\t\tif (!!parsed.auth) {\n\t\t\tconst [username, password] = parsed.auth.split(\":\");\n\t\t\tset(proxyConfig, \"auth\", {\n\t\t\t\tusername,\n\t\t\t\tpassword,\n\t\t\t});\n\t\t}\n\n\t\treturn proxyConfig;\n\t}\n\n\treturn null;\n};\n\nconst addRequestLogs = (instance: AxiosInstance) => {\n\tinstance.interceptors.request.use((request) => {\n\t\tif (!!request) {\n\t\t\tlog(`Requesting ${request.method} : ${redactNricfinInString(request.url)}`);\n\t\t}\n\t\treturn request;\n\t}, (error) => {\n\t\tlog(`Error occurred while making a request ${error.message}`, error);\n\t\treturn Promise.reject(error);\n\t});\n};\n\nconst addResponseLogs = (instance: AxiosInstance) => {\n\tinstance.interceptors.response.use((response) => {\n\t\tif (!!response) {\n\t\t\tlog(`Responded ${response.config.method}  : ${redactNricfinInString(response.config.url)}`);\n\t\t}\n\t\treturn response;\n\t}, (error) => {\n\t\tif (!!error.response) {\n\t\t\tlog(`Error occurred while responding to request ${error.response.config.method} :\n\t\t\t${redactNricfinInString(error.response.config.url)}`, error);\n\t\t} else {\n\t\t\tlog(`Error occurred while responding to request`, error);\n\t\t}\n\t\treturn Promise.reject(error);\n\t});\n};\n\nconst log = (message?: any, ...optionalParams: any[]) => {\n\t// tslint:disable-next-line:no-console\n\tconsole.log(message, optionalParams);\n};\n","\nimport { AxiosInstance, AxiosRequestConfig, AxiosResponse } from \"axios-https-proxy-fix\";\nimport { SigningUtil } from \"../../util\";\nimport { createClient } from \"../../client\";\n\nconst AUTH_PREFIX = \"apex_l2_eg\";\nconst TIMEOUT = 20000;\n\nexport interface MyInfoRequestConstructor {\n\trealm: string;\n\tappId: string;\n\tprivateKeyContent: string;\n\tprivateKeyPassword: string;\n}\n\n/**\n * Expose a request class for MyInfo endpoints other than those defined in MyInfoHelper\n */\n\nexport class MyInfoRequest {\n\tprivate readonly axiosClient: AxiosInstance;\n\tprivate readonly realm: string;\n\tprivate readonly appId: string;\n\tprivate readonly privateKeyContent: string;\n\tprivate readonly privateKeyPassword: string;\n\n\tconstructor(props: MyInfoRequestConstructor) {\n\t\tthis.axiosClient = createClient({\n\t\t\ttimeout: 10000,\n\t\t});\n\t\tthis.realm = props.realm;\n\t\tthis.appId = props.appId;\n\t\tthis.privateKeyContent = props.privateKeyContent;\n\t\tthis.privateKeyPassword = props.privateKeyPassword;\n\t}\n\n\tpublic async get(\n\t\turi: string,\n\t\tparams?: { [key: string]: any },\n\t\tbearer?: string,\n\t): Promise<AxiosResponse> {\n\t\tconst authHeader = SigningUtil.generateAuthorizationHeader(\n\t\t\tthis.realm,\n\t\t\tAUTH_PREFIX,\n\t\t\tSigningUtil.HttpMethod.GET,\n\t\t\turi,\n\t\t\tthis.appId,\n\t\t\tparams,\n\t\t\tthis.privateKeyContent,\n\t\t\tthis.privateKeyPassword,\n\t\t\tbearer,\n\t\t);\n\n\t\tconst requestConfig: AxiosRequestConfig = {\n\t\t\tparams,\n\t\t\theaders: {\n\t\t\t\tAuthorization: authHeader,\n\t\t\t},\n\t\t};\n\n\t\tconst response = await this.axiosClient.get(uri, requestConfig);\n\n\t\treturn response;\n\t}\n\n\tpublic async postForm(\n\t\turi: string,\n\t\tformData?: { [key: string]: any },\n\t\tbearer?: string,\n\t): Promise<AxiosResponse> {\n\t\tconst authHeader = SigningUtil.generateAuthorizationHeader(\n\t\t\tthis.realm,\n\t\t\tAUTH_PREFIX,\n\t\t\tSigningUtil.HttpMethod.POST,\n\t\t\turi,\n\t\t\tthis.appId,\n\t\t\tformData,\n\t\t\tthis.privateKeyContent,\n\t\t\tthis.privateKeyPassword,\n\t\t\tbearer,\n\t\t);\n\n\t\tconst requestConfig: AxiosRequestConfig = {\n\t\t\theaders: {\n\t\t\t\t\"Authorization\": authHeader,\n\t\t\t\t\"Cache-Control\": \"no-cache\",\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t};\n\n\t\tconst response = await this.axiosClient.post(uri, formData, requestConfig);\n\n\t\treturn response;\n\t}\n}\n","import { AxiosResponse } from \"axios-https-proxy-fix\";\nimport * as _ from \"lodash\";\n\nimport { MyInfoRequest } from \"./myinfo-request\";\nimport { Person } from \"../domain\";\nimport { MyInfoRequestConstructor } from \"./myinfo-request\";\nimport { decryptJWE } from \"../../util/JweUtil\";\nimport { IMyInfoHelper } from \"./index\";\n\nexport interface MyInfoHelperConstructor {\n\tattributes: ReadonlyArray<string>;\n\tclientID: string;\n\tpersonBasicURL: string;\n\tsingpassEserviceID: string;\n\tkeyToDecryptJWE: string;\n\tapexSigningURL: string;\n\tapexPrivateCert: string;\n\tapexPrivateCertPass: string;\n}\n\nexport class MyInfoHelper implements IMyInfoHelper {\n\n\tprivate myInfoRequest: MyInfoRequest;\n\n\tprivate readonly attributes: ReadonlyArray<string>;\n\tprivate readonly clientID: string;\n\tprivate readonly personBasicURL: string;\n\tprivate readonly singpassEserviceID: string;\n\tprivate readonly keyToDecryptJWE: string;\n\n\tpublic constructor(props: MyInfoHelperConstructor) {\n\t\tif (_.isEmpty(props.attributes)) {\n\t\t\tthrow new Error(\"Attribute list must contain values\");\n\t\t}\n\t\tthis.attributes = props.attributes;\n\t\tthis.clientID = props.clientID;\n\t\tthis.personBasicURL = props.personBasicURL;\n\t\tthis.singpassEserviceID = props.singpassEserviceID;\n\t\tthis.keyToDecryptJWE = props.keyToDecryptJWE;\n\n\t\tconst requestProps: MyInfoRequestConstructor = {\n\t\t\trealm: props.apexSigningURL,\n\t\t\tappId: props.clientID,\n\t\t\tprivateKeyContent: props.apexPrivateCert,\n\t\t\tprivateKeyPassword: props.apexPrivateCertPass,\n\t\t};\n\t\tthis.myInfoRequest = new MyInfoRequest(requestProps);\n\t}\n\n\t/**\n\t * Obtain person data using uinfin.\n\t * In the generic K, pass in the list of string literal of the attributes you expect to get back.\n\t * getPersonData will return an object with only the properties matching the keys.\n\t * e.g. when K = \"name\" | \"email\", getPersonData returns an object looking like { name, email }\n\t */\n\tpublic getPersonData = async<K extends keyof Person>(uinfin: string): Promise<Pick<Person, K>> => {\n\t\tconst url = `${this.personBasicURL}/${uinfin}`;\n\t\tconst params = {\n\t\t\tclient_id: this.clientID,\n\t\t\tsingpassEserviceId: this.singpassEserviceID,\n\t\t\tattributes: _.join(this.attributes, \",\"),\n\t\t};\n\n\t\tlet response: AxiosResponse;\n\t\ttry {\n\t\t\tresponse = await this.myInfoRequest.get(url, params);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error requesting for person data (JWE) from MyInfo\", error);\n\t\t\tthrow error;\n\t\t}\n\n\t\ttry {\n\t\t\t// Decrypt person data\n\t\t\tconst encryptedPersonJWE = response.data;\n\t\t\tconst jwe = await decryptJWE(encryptedPersonJWE, this.keyToDecryptJWE);\n\t\t\tconst personData = JSON.parse(jwe.payload.toString());\n\n\t\t\tif (personData === undefined || personData == null) {\n\t\t\t\tthrow new Error(\"Person data cannot be null\");\n\t\t\t}\n\n\t\t\treturn personData;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error verifying person data from MyInfo\", error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n","import * as request from \"request\";\nimport { Person } from \"../domain\";\n\nexport interface IMyInfoHelper {\n\tgetPersonData: <K extends keyof Person>(uinfin: string) => Promise<Pick<Person, K>>;\n}\n\nexport interface IMyInfoRequest {\n\tget: (\n\t\turi: string,\n\t\tparams?: { [key: string]: any },\n\t\tbearer?: string,\n\t) => Promise<request.RequestResponse>;\n\tpostForm: (\n\t\turi: string,\n\t\tformData?: { [key: string]: any },\n\t\tbearer?: string,\n\t) => Promise<request.RequestResponse>;\n}\n\n\nexport * from \"./myinfo-helper\";\nexport * from \"./myinfo-request\";\n","import { Person } from \"../../domain\";\n\nexport interface FakeProfile {\n\tid: string;\n\tname: ProfileArchetype;\n\tgenerate: (profileName?: string) => Person;\n}\n\n/**\n * Used in MyInfo.Fake.Helper.getPersonData to get a archetype person\n */\nexport enum ProfileArchetype {\n\tMR_PR_DADDY_ONE_CHILD = \"Mr PR Daddy with One Child\",\n\tMR_PR_DADDY_PERFECT = \"Mr PR Daddy Perfect\",\n\tMR_SG_DADDY_CHILD_IS_OLD = \"Mr SG with 1 old child\",\n\tMR_SG_DADDY_CHILD_NONE = \"Mr SG with no children\",\n\tMR_SG_DADDY_LONG_NAMES = \"Mr SG daddy with long names\",\n\tMR_SG_DADDY_MANY_CHILDREN = \"Mr SG with many children\",\n\tMR_SG_DADDY_MISSING_FIELDS = \"Mr SG Daddy Missing Fields\",\n\tMR_SG_DADDY_MISSING_UNEDITABLE_FIELDS = \"Mr SG Daddy Missing Uneditable Fields\",\n\tMR_SG_DADDY_PERFECT = \"Mr SG Daddy Perfect\",\n\tMR_SG_PRESCHOOL_CHILDREN = \"Mr SG Preschool Children\",\n\tMRS_MY_MOMMY_PERFECT = \"Mrs MY Mommy Perfect\",\n\tMRS_SG_MOMMY_PERFECT = \"Mrs SG Mommy Perfect\",\n\tMR_MY_DADDY_PERFECT = \"Mr MY Daddy Perfect\",\n}\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\n\n\nconst id = \"S8399420G\";\nconst name = ProfileArchetype.MR_SG_DADDY_PERFECT;\n\nexport const mrSGDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\treturn {\n\t\t\t\"name\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": profileName,\n\t\t\t},\n\t\t\t\"hanyupinyinname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"CHEN XIAO HUI\",\n\t\t\t},\n\t\t\t\"aliasname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"TRICIA TAN XIAO HUI\",\n\t\t\t},\n\t\t\t\"hanyupinyinaliasname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"IUH OAIX NAT AICIRT\",\n\t\t\t},\n\t\t\t\"marriedname\": {\n\t\t\t\t\"lastupdated\": \"2015-06-01\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"sex\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"M\",\n\t\t\t},\n\t\t\t\"race\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"CN\",\n\t\t\t},\n\t\t\t\"secondaryrace\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"EU\",\n\t\t\t},\n\t\t\t\"dialect\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"nationality\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"dob\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1983-05-17\",\n\t\t\t},\n\t\t\t\"birthcountry\": {\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"residentialstatus\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"C\",\n\t\t\t},\n\t\t\t\"passportnumber\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"E35463874W\",\n\t\t\t},\n\t\t\t\"passportexpirydate\": {\n\t\t\t\t\"lastupdated\": \"2017-08-25\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2020-01-01\",\n\t\t\t},\n\t\t\t\"regadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"128\",\n\t\t\t\t\"street\": \"BEDOK NORTH AVENUE 1\",\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"block\": \"548\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"postal\": \"460548\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"floor\": \"09\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"mailadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"128\",\n\t\t\t\t\"street\": \"BEDOK NORTH AVENUE 1\",\n\t\t\t\t\"lastupdated\": \"2016-03-11\",\n\t\t\t\t\"block\": \"548\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"postal\": \"460548\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"floor\": \"09\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"billadd\": {\n\t\t\t\t\"country\": \"SG\",\n\t\t\t\t\"unit\": \"\",\n\t\t\t\t\"street\": \"\",\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"block\": \"\",\n\t\t\t\t\"source\": \"\",\n\t\t\t\t\"postal\": \"\",\n\t\t\t\t\"classification\": \"\",\n\t\t\t\t\"floor\": \"\",\n\t\t\t\t\"building\": \"\",\n\t\t\t},\n\t\t\t\"housingtype\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"hdbtype\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"116\",\n\t\t\t},\n\t\t\t\"ownerprivate\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"N\",\n\t\t\t},\n\t\t\t\"email\": {\n\t\t\t\t\"lastupdated\": \"2017-12-13\",\n\t\t\t\t\"source\": \"4\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"test@gmail.com\",\n\t\t\t},\n\t\t\t\"homeno\": {\n\t\t\t\t\"code\": \"65\",\n\t\t\t\t\"prefix\": \"+\",\n\t\t\t\t\"lastupdated\": \"2017-11-20\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"nbr\": \"83416847\",\n\t\t\t},\n\t\t\t\"mobileno\": {\n\t\t\t\t\"code\": \"65\",\n\t\t\t\t\"prefix\": \"+\",\n\t\t\t\t\"lastupdated\": \"2017-12-13\",\n\t\t\t\t\"source\": \"4\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"nbr\": \"83416847\",\n\t\t\t},\n\t\t\t\"marital\": {\n\t\t\t\t\"lastupdated\": \"2017-03-29\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2\",\n\t\t\t},\n\t\t\t\"marriagecertno\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"M1234\",\n\t\t\t},\n\t\t\t\"countryofmarriage\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"SG\",\n\t\t\t},\n\t\t\t\"marriagedate\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2017-01-03\",\n\t\t\t},\n\t\t\t\"divorcedate\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t\t\"childrenbirthrecords\": [\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"0901\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"S5562882C\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Pei Ni\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2011-09-10\",\n\t\t\t\t\t\"name\": \"Jo Tan Pei Ni\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"2021\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"S8816582I\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Wei Ling\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2015-07-18\",\n\t\t\t\t\t\"name\": \"Joyce Tan Wei Ling\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"dialect\": \"HK\",\n\t\t\t\t\t\"race\": \"CN\",\n\t\t\t\t\t\"tob\": \"0901\",\n\t\t\t\t\t\"sex\": \"F\",\n\t\t\t\t\t\"source\": \"1\",\n\t\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\t\"birthcertno\": \"T0202564C\",\n\t\t\t\t\t\"hanyupinyinname\": \"Cheng Shu Hui\",\n\t\t\t\t\t\"hanyupinyinaliasname\": \"\",\n\t\t\t\t\t\"marriedname\": \"\",\n\t\t\t\t\t\"aliasname\": \"\",\n\t\t\t\t\t\"dob\": \"2012-09-10\",\n\t\t\t\t\t\"name\": \"Joycelyn Tan Shu Hui\",\n\t\t\t\t\t\"lastupdated\": \"2018-05-16\",\n\t\t\t\t\t\"secondaryrace\": \"\",\n\t\t\t\t},\n\t\t\t],\n\t\t\t\"edulevel\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"9\",\n\t\t\t},\n\t\t\t\"gradyear\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1998\",\n\t\t\t},\n\t\t\t\"schoolname\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"T07GS3011J\",\n\t\t\t\t\"desc\": \"SIGLAP SECONDARY SCHOOL\",\n\t\t\t},\n\t\t\t\"occupation\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"53201\",\n\t\t\t\t\"desc\": \"HEALTHCARE ASSISTANT\",\n\t\t\t},\n\t\t\t\"employment\": {\n\t\t\t\t\"lastupdated\": \"2017-10-11\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"ALPHA\",\n\t\t\t},\n\t\t\t\"workpassstatus\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"Live\",\n\t\t\t},\n\t\t\t\"workpassexpirydate\": {\n\t\t\t\t\"lastupdated\": \"2018-03-02\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2018-12-31\",\n\t\t\t},\n\t\t\t\"householdincome\": {\n\t\t\t\t\"high\": \"5999\",\n\t\t\t\t\"low\": \"5000\",\n\t\t\t\t\"lastupdated\": \"2017-10-24\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t},\n\t\t\t\"assessableincome\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"1456789.00\",\n\t\t\t},\n\t\t\t\"assessyear\": {\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"2015\",\n\t\t\t},\n\t\t\t\"cpfcontributions\": {\n\t\t\t\t\"cpfcontribution\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-11\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2016-12-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2016-12\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-01-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-01\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-02-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-02\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-03-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-03\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-04-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-04\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-05-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-05\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-06-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-06\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-12\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-07-21\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-01\",\n\t\t\t\t\t\t\"amount\": \"500.00\",\n\t\t\t\t\t\t\"month\": \"2017-07\",\n\t\t\t\t\t\t\"employer\": \"Crystal Horse Invest Pte Ltd\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-08-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-08\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-09-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-09\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-10-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-10\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-11-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-11\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2017-12-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-01\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2017-12\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-12\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2018-01\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"date\": \"2018-01-21\",\n\t\t\t\t\t\t\"amount\": \"750.00\",\n\t\t\t\t\t\t\"month\": \"2018-01\",\n\t\t\t\t\t\t\"employer\": \"Delta Marine Consultants PL\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t},\n\t\t\t\"cpfbalances\": {\n\t\t\t\t\"oa\": \"1581.48\",\n\t\t\t\t\"ma\": \"11470.70\",\n\t\t\t\t\"lastupdated\": \"2015-12-23\",\n\t\t\t\t\"source\": \"1\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"sa\": \"21967.09\",\n\t\t\t\t\"ra\": \"51967.09\",\n\t\t\t},\n\t\t\t\"vehno\": {\n\t\t\t\t\"lastupdated\": \"\",\n\t\t\t\t\"source\": \"2\",\n\t\t\t\t\"classification\": \"C\",\n\t\t\t\t\"value\": \"\",\n\t\t\t},\n\t\t};\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\nconst id = \"S2599302J\";\nconst name = ProfileArchetype.MR_PR_DADDY_PERFECT;\n\nexport const mrPRDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.nationality.value = \"AD\";\n\t\tprofile.residentialstatus.value = \"P\";\n\n\t\treturn profile;\n\t},\n};\n","import { ChildBirthRecord } from \"../../domain\";\nimport * as moment from \"moment\";\n\nconst formatDateToString = (date?: moment.Moment): string => {\n\tif (date) {\n\t\treturn date.format(\"YYYY-MM-DD\").toString();\n\t}\n\treturn moment().format(\"YYYY-MM-DD\").toString();\n};\n\nconst childYoungest = {\n\tbirthcertno: \"T1828432J\",\n\tname: \"Youngest Tan Ke Xuan\",\n\tdob: formatDateToString(),\n} as ChildBirthRecord;\n\nconst child1MonthOld = {\n\tbirthcertno: \"T4383608G\",\n\tname: \"1 Month Tan Ke Yu\",\n\tdob: formatDateToString(moment().subtract(1, \"months\")),\n} as ChildBirthRecord;\n\nconst child2MonthsOld = {\n\tbirthcertno: \"T7153144E\",\n\tname: \"2 Months Tan Keh Guan\",\n\tdob: formatDateToString(moment().subtract(2, \"months\")),\n} as ChildBirthRecord;\n\nconst childMiddle1 = {\n\tbirthcertno: \"T1694727F\",\n\tname: \"Middle Tan Twin1\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle2 = {\n\tbirthcertno: \"T1669632Z\",\n\tname: \"Middle Tan Twin2\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle3 = {\n\tbirthcertno: \"T1509027D\",\n\tname: \"Tan Boy\",\n\tdob: formatDateToString(moment().subtract(3, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle4 = {\n\tbirthcertno: \"T1422931G\",\n\tname: \"Tan Girl\",\n\tdob: formatDateToString(moment().subtract(4, \"years\")),\n} as ChildBirthRecord;\n\nconst childMiddle5 = {\n\tbirthcertno: \"T1511326F\",\n\tname: \"Tan Girl Younger\",\n\tdob: formatDateToString(moment().subtract(5, \"years\")),\n} as ChildBirthRecord;\n\nconst childSuperOld = {\n\tbirthcertno: \"T0050832I\",\n\tname: \"Super Old Tan Ke Wei\",\n\tdob: formatDateToString(moment().subtract(8, \"years\")),\n} as ChildBirthRecord;\n\nconst child6YearsOld = {\n\tbirthcertno: \"T1364674G\",\n\tname: \"Turning 6 Tan Kid born Jan 1st\",\n\tdob: formatDateToString(moment().subtract(6, \"years\").startOf(\"year\")),\n} as ChildBirthRecord;\n\nconst child7YearsOld = {\n\tbirthcertno: \"T1210114C\",\n\tname: \"Turning 7 Tan Kid born Dec 31\",\n\tdob: formatDateToString(moment().subtract(7, \"years\").endOf(\"year\")),\n} as ChildBirthRecord;\n\nexport const ChildrenRecords = {\n\tchildYoungest,\n\tchild1MonthOld,\n\tchild2MonthsOld,\n\tchildMiddle1,\n\tchildMiddle2,\n\tchildMiddle3,\n\tchildMiddle4,\n\tchildMiddle5,\n\tchildSuperOld,\n\tchild6YearsOld,\n\tchild7YearsOld,\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_CHILD_IS_OLD;\n\nexport const mrSGDaddyChildIsOld: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = [ChildrenRecords.childSuperOld];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_CHILD_NONE;\n\nexport const mrSGDaddyChildNone: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = [];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_LONG_NAMES;\n\nexport const mrSGDaddyLongNames: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tconst longName = \"Princess Aura Nurr Ermily Amara Auliya Bidadari S/O (Nawal), El@Bjrk' Mara-Jose!\";\n\t\tprofileName = _.isEmpty(profileName) ? longName : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\t\tprofile.childrenbirthrecords[0].name = longName + \" JR\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MR_SG_DADDY_MANY_CHILDREN;\n\nexport const mrSGDaddyManyChildren: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport * as moment from \"moment\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildBirthRecord } from \"../../domain\";\n\n\nconst id = \"S0350934F\";\nconst name = ProfileArchetype.MR_SG_PRESCHOOL_CHILDREN;\n\nexport const mrPreschoolRegister: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.childrenbirthrecords = _.values(ChildrenRecords);\n\n\t\treturn profile;\n\t},\n};\n\nconst formatDateToString = (date?: moment.Moment): string => {\n\tif (date) {\n\t\treturn date.format(\"YYYY-MM-DD\").toString();\n\t}\n\treturn moment().format(\"YYYY-MM-DD\").toString();\n};\n\n// the children here have birthcertno related to the preschool interest registration mock\nconst c1 = {\n\tbirthcertno: \"T1639540J\",\n\tname: \"Child w level not offered\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst c2 = {\n\tbirthcertno: \"T1717003H\",\n\tname: \"Child w ineligible\",\n\tdob: formatDateToString(moment().subtract(2, \"years\")),\n} as ChildBirthRecord;\n\nconst c3 = {\n\tbirthcertno: \"T1728256A\",\n\tname: \"Child w registered\",\n\tdob: formatDateToString(moment().subtract(3, \"years\")),\n} as ChildBirthRecord;\n\nconst c4 = {\n\tbirthcertno: \"T1766863Z\",\n\tname: \"Child w nothing\",\n\tdob: formatDateToString(moment().subtract(4, \"years\")),\n} as ChildBirthRecord;\n\nconst c5 = {\n\tbirthcertno: \"T1783246D\",\n\tname: \"Child2 w level not offered \",\n\tdob: formatDateToString(moment().subtract(5, \"years\")),\n} as ChildBirthRecord;\n\nconst c6 = {\n\tbirthcertno: \"T1790160A\",\n\tname: \"Child2 w ineligible\",\n\tdob: formatDateToString(moment().subtract(6, \"years\")),\n} as ChildBirthRecord;\n\nexport const ChildrenRecords = {\n\tc1, c2, c3, c4, c5, c6,\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"S8779834H\";\nconst name = ProfileArchetype.MR_SG_DADDY_MISSING_FIELDS;\n\nexport const mrSGDaddyMissingFields: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.hanyupinyinname.value = \"\";\n\t\tprofile.aliasname.value = null;\n\t\tprofile.hanyupinyinaliasname.value = \"\";\n\t\tprofile.secondaryrace.value = \"\";\n\t\tprofile.residentialstatus.value = \"U\";\n\t\tprofile.homeno.nbr = \"\";\n\t\tprofile.marriagecertno.value = \"\";\n\t\tprofile.countryofmarriage.value = \"\";\n\t\tprofile.childrenbirthrecords = profile.childrenbirthrecords.slice(0, 1);\n\t\tprofile.edulevel.value = \"0\";\n\t\tprofile.occupation.desc = \"SPACE PIRATE\";\n\t\tprofile.occupation.value = \"\";\n\t\tprofile.cpfcontributions.cpfcontribution = profile.cpfcontributions.cpfcontribution.slice(0, 1);\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"S8974352D\";\nconst name = ProfileArchetype.MR_SG_DADDY_MISSING_UNEDITABLE_FIELDS;\n\nexport const mrSGDaddyMissingUneditableFields: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\n\t\t// Uneditable field\n\t\tprofile.nationality.value = \"\";\n\t\tprofile.dob.value = \"\";\n\n\t\tprofile.regadd.block = \"\";\n\t\tprofile.regadd.building = \"\";\n\t\tprofile.regadd.classification = \"\";\n\t\tprofile.regadd.country = \"\";\n\t\tprofile.regadd.floor = \"\";\n\t\tprofile.regadd.postal = \"\";\n\t\tprofile.regadd.street = \"\";\n\t\tprofile.regadd.unit = \"\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { ChildrenRecords } from \"./childbirthRecords\";\n\nconst id = \"S7936715Z\";\nconst name = ProfileArchetype.MR_PR_DADDY_ONE_CHILD;\n\nexport const mrPRDaddyOneChild: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.residentialstatus.value = \"P\";\n\n\t\tprofile.childrenbirthrecords = [ChildrenRecords.childYoungest];\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"F5994458N\";\nconst name = ProfileArchetype.MRS_MY_MOMMY_PERFECT;\n\nexport const mrsMYMommyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"F\";\n\t\tprofile.nationality.value = \"MY\";\n\t\tprofile.birthcountry.value = \"MY\";\n\t\tprofile.residentialstatus.value = \"A\";\n\t\tprofile.passportnumber.value = \"A00000000\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"T2446959F\";\nconst name = ProfileArchetype.MRS_SG_MOMMY_PERFECT;\n\nexport const mrsSGMommyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"F\";\n\n\t\treturn profile;\n\t},\n};\n","import * as _ from \"lodash\";\nimport { FakeProfile, ProfileArchetype } from \"./fake-profile\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\n\n\nconst id = \"F5994458N\";\nconst name = ProfileArchetype.MR_MY_DADDY_PERFECT;\n\nexport const mrMYDaddyPerfect: FakeProfile = {\n\tid,\n\tname,\n\tgenerate: (profileName) => {\n\t\tprofileName = _.isEmpty(profileName) ? name : profileName;\n\n\t\tconst profile = mrSGDaddyPerfect.generate(profileName);\n\t\tprofile.sex.value = \"M\";\n\t\tprofile.nationality.value = \"MY\";\n\t\tprofile.birthcountry.value = \"MY\";\n\t\tprofile.residentialstatus.value = \"A\";\n\t\tprofile.passportnumber.value = \"A00000000\";\n\n\t\treturn profile;\n\t},\n};\n","import { mrPRDaddyPerfect } from \"./mrPRDaddyPerfect\";\nimport { mrSGDaddyChildIsOld } from \"./mrSGDaddyChildIsOld\";\nimport { mrSGDaddyChildNone } from \"./mrSGDaddyChildNone\";\nimport { mrSGDaddyLongNames } from \"./mrSGDaddyLongNames\";\nimport { mrSGDaddyManyChildren } from \"./mrSGDaddyManyChildren\";\nimport { mrPreschoolRegister } from \"./mrSGPreschoolRegister\";\nimport { mrSGDaddyMissingFields } from \"./mrSGDaddyMissingFields\";\nimport { mrSGDaddyMissingUneditableFields } from \"./mrSGDaddyMissingUneditableFields\";\nimport { mrPRDaddyOneChild } from \"./mrPRDaddyOneChild\";\nimport { mrSGDaddyPerfect } from \"./mrSGDaddyPerfect\";\nimport { mrsMYMommyPerfect } from \"./mrsMYMommyPerfect\";\nimport { mrsSGMommyPerfect } from \"./mrsSGMommyPerfect\";\nimport { mrMYDaddyPerfect } from \"./mrMYDaddyPerfect\";\n\n/**\n * Exhaustive list of our MyInfo archetype profiles\n */\nexport const profiles = [\n\tmrSGDaddyPerfect,\n\tmrsSGMommyPerfect,\n\tmrPRDaddyPerfect,\n\tmrsMYMommyPerfect,\n\tmrSGDaddyChildNone,\n\tmrPRDaddyOneChild,\n\tmrSGDaddyChildIsOld,\n\tmrSGDaddyManyChildren,\n\tmrPreschoolRegister,\n\tmrSGDaddyLongNames,\n\tmrSGDaddyMissingFields,\n\tmrSGDaddyMissingUneditableFields,\n\tmrMYDaddyPerfect,\n];\n","import * as _ from \"lodash\";\n\nimport { Person } from \"../domain\";\nimport { ProfileArchetype } from \"./profiles/fake-profile\";\nimport { profiles } from \"./profiles/fake-profiles\";\n\nexport interface MockParams {\n\tarchetype: ProfileArchetype;\n\tmarital?: string;\n\tmarriagedate?: string;\n\tmarriagecertno?: string;\n\tcountryofmarriage?: string;\n\toccupation?: string;\n\toccupationfreeform?: string;\n\tdob?: string;\n}\n\nexport interface IFakeMyInfoHelper {\n\tgetPersonData: (mockParams: MockParams) => Person;\n}\n\nexport class FakeMyInfoHelper implements IFakeMyInfoHelper {\n\t/**\n\t * @param attributes attributes to return in the MyInfoPerson in getPersonData\n\t */\n\tpublic constructor(\n\t\tprivate readonly attributes?: ReadonlyArray<string>,\n\t) { }\n\n\t/**\n\t * fake getPersonData\n\t * @param input the mock profile parameters.\n\t * See FakeMyInfoPersonArchetypes for the actual person.\n\t */\n\tpublic getPersonData = (mockParams: MockParams): Person => {\n\t\tconst mockProfile = profiles.find((profile) => profile.name === mockParams.archetype);\n\t\tif (!mockProfile)\n\t\t\treturn null;\n\n\t\tconst myinfoPerson = {\n\t\t\t...mockProfile.generate(),\n\t\t};\n\n\t\tif (!_.isEmpty(mockParams.marital)) {\n\t\t\tmyinfoPerson.marital.value = mockParams.marital;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.marriagedate)) {\n\t\t\tmyinfoPerson.marriagedate.value = mockParams.marriagedate;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.marriagecertno)) {\n\t\t\tmyinfoPerson.marriagecertno.value = mockParams.marriagecertno;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.countryofmarriage)) {\n\t\t\tmyinfoPerson.countryofmarriage.value = mockParams.countryofmarriage;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.dob)) {\n\t\t\tmyinfoPerson.dob.value = mockParams.dob;\n\t\t}\n\n\t\tif (!_.isEmpty(mockParams.occupation)) {\n\t\t\tmyinfoPerson.occupation.value = mockParams.occupation;\n\t\t} else {\n\t\t\tif (!_.isEmpty(mockParams.occupationfreeform)) {\n\t\t\t\tmyinfoPerson.occupation.value = \"\";\n\t\t\t\tmyinfoPerson.occupation.desc = mockParams.occupationfreeform;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.attributes) {\n\t\t\treturn myinfoPerson;\n\t\t}\n\n\t\treturn filterThroughMyInfoAttributes(myinfoPerson, this.attributes);\n\t}\n}\n\n/**\n * @description Returns new fake person with only the attributes listed in attributes param. Does not mutate.\n * @param person fake MyInfo person\n * @param attributes array of attributes to filter for\n */\nfunction filterThroughMyInfoAttributes(person: Person, attributes: ReadonlyArray<string>): Person {\n\tconst attrs = new Set(attributes);\n\n\treturn _.toPairs(person)\n\t\t.filter(([k]) => attrs.has(k))\n\t\t.reduce((accumulator, [k, v]) => ({ ...accumulator, [k]: v }), {} as Person);\n}\n","import * as request from \"request\";\nimport { IMyInfoRequest } from \"../helper\";\n\nexport class FakeMyInfoRequest implements IMyInfoRequest {\n\tconstructor() {\n\t}\n\n\tpublic async get(\n\t\texpectedResponse: any,\n\t): Promise<request.RequestResponse> {\n\t\treturn expectedResponse;\n\t}\n\n\tpublic async postForm(\n\t\texpectedResponse: any,\n\t): Promise<request.RequestResponse> {\n\t\treturn expectedResponse;\n\t}\n}\n","export { FakeMyInfoHelper as Helper, IFakeMyInfoHelper as IHelper, MockParams } from \"./fake-helper\";\nexport { FakeMyInfoRequest as Request } from \"./fake-request\";\nexport * from \"./profiles/fake-profiles\";\nexport { ProfileArchetype } from \"./profiles/fake-profile\";\n","export {\n\tMyInfoHelper as Helper, MyInfoHelperConstructor as HelperConstructor,\n\tMyInfoRequest as Request, MyInfoRequestConstructor as MyInfoRequestConstructor,\n} from \"./helper\";\n\nimport * as Fake from \"./fake\";\nexport { Fake };\n\nexport { AddressLocal, ChildBirthRecord, Person, PhoneNumLocal } from \"./domain\";\n","import * as querystringUtil from \"querystring\";\nimport { createClient } from \"../client\";\nimport { JweUtil } from \"../util\";\nimport { AxiosInstance, AxiosRequestConfig } from \"axios-https-proxy-fix\";\n\nexport enum SessionRefreshResult {\n\tSUCCESS = \"SUCCESS\",\n\tSINGPASS_ERROR = \"SINGPASS_ERROR\",\n\tINVALID_SESSION_ID = \"INVALID_SESSION_ID\",\n}\n\nexport enum SessionLogoutResult {\n\tSUCCESS = \"SUCCESS\",\n\tSINGPASS_ERROR = \"SINGPASS_ERROR\",\n}\n\nexport interface TokenResponse {\n\taccess_token: string;\n\trefresh_token: string;\n\tid_token: string;\n\ttoken_type: string;\n\texpires_in: number;\n\tscope: string;\n}\n\nexport interface TokenPayload {\n\trt_hash: string;\n\tnonce?: string;\n\tiat: number;\n\tiss: string;\n\tat_hash: string;\n\t// sub contains user's NRIC and UUID: s=S1234567A,u=f19fdf4c-f57b-40b5-a8e0-6fb6eef640e3\n\tsub: string;\n\texp: number;\n\taud: string;\n\tamr: string[];\n}\n\nexport interface OidcHelperConstructor {\n\tauthorizationUrl: string;\n\tlogoutUrl: string;\n\ttokenUrl: string;\n\tclientID: string;\n\tclientSecret: string;\n\tredirectUri: string;\n\tjweDecryptKey: string;\n\tjwsVerifyKey: string;\n}\n\nexport class OidcHelper {\n\n\tprivate SINGPASS_SESSION_COOKIE_NAME = \"PD-S-SESSION-ID\";\n\tprivate axiosClient: AxiosInstance = createClient({\n\t\ttimeout: 10000,\n\t});\n\n\tprivate authorizationUrl: string;\n\tprivate logoutUrl: string;\n\tprivate tokenUrl: string;\n\tprivate clientID: string;\n\tprivate clientSecret: string;\n\tprivate redirectUri: string;\n\tprivate jweDecryptKey: string;\n\tprivate jwsVerifyKey: string;\n\n\n\tconstructor(props: OidcHelperConstructor) {\n\t\tthis.authorizationUrl = props.authorizationUrl;\n\t\tthis.logoutUrl = props.logoutUrl;\n\t\tthis.tokenUrl = props.tokenUrl;\n\t\tthis.clientID = props.clientID;\n\t\tthis.clientSecret = props.clientSecret;\n\t\tthis.redirectUri = props.redirectUri;\n\t\tthis.jweDecryptKey = props.jweDecryptKey;\n\t\tthis.jwsVerifyKey = props.jwsVerifyKey;\n\t}\n\n\tpublic constructAuthorizationUrl = (\n\t\tstate: string,\n\t\tnonce?: string,\n\t): string => {\n\t\tconst queryParams = {\n\t\t\tstate,\n\t\t\t...(nonce ? { nonce } : {}),\n\t\t\tredirect_uri: this.redirectUri,\n\t\t\tscope: \"openid\",\n\t\t\tclient_id: this.clientID,\n\t\t\tresponse_type: \"code\",\n\n\t\t};\n\t\tconst queryString = querystringUtil.stringify(queryParams);\n\t\treturn `${this.authorizationUrl}?${queryString}`;\n\t}\n\n\t/**\n\t * Get tokens from Singpass endpoint. Note: This will fail if not on an IP whitelisted by SP.\n\t * Use getIdTokenPayload on returned Token Response to get the token payload\n\t */\n\tpublic getTokens = async (authCode: string, axiosRequestConfig?: AxiosRequestConfig): Promise<TokenResponse> => {\n\t\tconst params = {\n\t\t\tgrant_type: \"authorization_code\",\n\t\t\tcode: authCode,\n\t\t\tclient_id: this.clientID,\n\t\t\tclient_secret: this.clientSecret,\n\t\t\tredirect_uri: this.redirectUri,\n\t\t};\n\t\tconst body = querystringUtil.stringify(params);\n\n\t\tconst config = {\n\t\t\theaders: { \"content-type\": \"application/x-www-form-urlencoded\" },\n\t\t\t...axiosRequestConfig,\n\t\t};\n\t\tconst response = await this.axiosClient.post(this.tokenUrl, body, config);\n\t\tif (!response.data.id_token) {\n\t\t\tconsole.error(\"Failed to get ID token: invalid response data\", response.data);\n\t\t\tthrow new Error(\"Failed to get ID token\");\n\t\t}\n\t\treturn response.data;\n\t}\n\n\t/**\n\t * Decrypts the ID Token JWT inside the TokenResponse to get the payload\n\t * Use extractNricAndUuidFromPayload on the returned Token Payload to get the NRIC and UUID\n\t */\n\tpublic async getIdTokenPayload(tokens: TokenResponse): Promise<TokenPayload> {\n\t\ttry {\n\n\t\t\tconst { id_token } = tokens;\n\t\t\tconst decryptedJwe = await JweUtil.decryptJWE(id_token, this.jweDecryptKey);\n\t\t\tconst jwsPayload = decryptedJwe.payload.toString();\n\t\t\tconst verifiedJws = await JweUtil.verifyJWS(jwsPayload, this.jwsVerifyKey);\n\t\t\treturn JSON.parse(verifiedJws.payload.toString()) as TokenPayload;\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to get token payload\", e);\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the nric and uuid from the token payload\n\t */\n\tpublic extractNricAndUuidFromPayload(payload: TokenPayload): { nric: string, uuid: string } {\n\t\tconst { sub } = payload;\n\n\t\tif (sub) {\n\t\t\tconst extractionRegex = /s=([STFG]\\d{7}[A-Z]).*,u=(.*)/i;\n\t\t\tconst matchResult = sub.match(extractionRegex);\n\n\t\t\tif (!matchResult) {\n\t\t\t\tthrow Error(\"Token payload sub property is invalid, does not contain valid NRIC and uuid string\");\n\t\t\t}\n\n\t\t\tconst nric = matchResult[1];\n\t\t\tconst uuid = matchResult[2];\n\n\t\t\treturn { nric, uuid };\n\t\t}\n\n\t\tthrow Error(\"Token payload sub property is not defined\");\n\t}\n\n\t/**\n\t * [DEPRECATED] Refresh the Singpass session, using a valid session id (that is retrieved from Singpass domain cookie)\n\t * @param sessionId the session id extracted from PD-S-SESSION-ID in the user agent\n\t * @param state state that will be passed to the your redirect uri from this refresh call. defaults to \"dummyState\"\n\t * @returns INVALID_SESSION_ID - the sessionId param is no longer valid\n\t * @returns SINGPASS_ERROR - the call to Singpass server to refresh is not successful\n\t * @returns SUCCESS - refresh sessionId successfully\n\t */\n\tpublic async refreshSession(sessionId: string, state: string = \"dummyState\"): Promise<SessionRefreshResult> {\n\t\tconst authorizationUrl = this.constructAuthorizationUrl(state);\n\t\tconst requestConfig = { headers: { Cookie: `${this.SINGPASS_SESSION_COOKIE_NAME}=${sessionId}` } };\n\t\ttry {\n\t\t\tconst result = await this.axiosClient.get(authorizationUrl, requestConfig);\n\t\t\tif (result.request.res.responseUrl.includes(\"saml.singpass.gov.sg\")) {\n\t\t\t\tconsole.warn(`Attempted to refresh session with invalid session ID ${sessionId}`);\n\t\t\t\treturn SessionRefreshResult.INVALID_SESSION_ID;\n\t\t\t}\n\t\t\treturn SessionRefreshResult.SUCCESS;\n\t\t} catch (e) {\n\t\t\tconsole.warn(`Singpass Error while attempting to refresh session for sessionId: ${sessionId}\\nError:`, e);\n\t\t\treturn SessionRefreshResult.SINGPASS_ERROR;\n\t\t}\n\t}\n\n\n\n\t/**\n\t * [DEPRECATED] Log user out of Singpass, using a valid session id (that is retrieved from Singpass domain cookie)\n\t * @param sessionId the session id extracted from PD-S-SESSION-ID in the user agent\n\t */\n\tpublic async logoutOfSession(sessionId: string): Promise<SessionLogoutResult> {\n\t\tconst requestConfig = { headers: { Cookie: `${this.SINGPASS_SESSION_COOKIE_NAME}=${sessionId}` } };\n\t\ttry {\n\t\t\tawait this.axiosClient.get(this.logoutUrl, requestConfig);\n\t\t\treturn SessionLogoutResult.SUCCESS;\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Singpass Error while attempting to logout of Singpass session\", e);\n\t\t\treturn SessionLogoutResult.SINGPASS_ERROR;\n\t\t}\n\t}\n\n\tpublic _testExports = {\n\t\tsingpassClient: this.axiosClient,\n\t};\n}\n","export * from \"./singpass-helper\";\n","import * as MyInfo from \"./myinfo\";\nimport * as Singpass from \"./singpass\";\n\nexport { MyInfo, Singpass };\n"],"sourceRoot":""}